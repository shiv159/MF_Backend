{
	"info": {
		"_postman_id": "9dc94b16-5574-4143-8fa0-42d0a0607de4",
		"name": "Mutual Fund API - Authentication Copy",
		"description": "Postman collection for testing authentication and onboarding endpoints",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "16129409",
		"_collection_link": "https://grey-robot-799575.postman.co/workspace/MF_TOOLS~4516dbd3-df93-4b18-b90b-2fbed6e04703/collection/16129409-9dc94b16-5574-4143-8fa0-42d0a0607de4?action=share&source=collection_link&creator=16129409"
	},
	"item": [
		{
			"name": "Dashboard",
			"item": [
				{
					"name": "Get Dashboard (Header Auth)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// @ts-check",
									"// Parse the response body as JSON",
									"const responseBodyJson = pm.response.json();",
									"",
									"// Check that the status code is 200",
									"pm.test('Status code is 200', function () {",
									"  pm.response.to.have.status(200);",
									"});",
									"",
									"// Check that response has required properties",
									"pm.test('Response has user profile', function () {",
									"  pm.expect(responseBodyJson).to.have.property('userProfile');",
									"  pm.expect(responseBodyJson.userProfile).to.have.property('userId');",
									"  pm.expect(responseBodyJson.userProfile).to.have.property('email');",
									"});",
									"",
									"// Check portfolio summary exists",
									"pm.test('Response has portfolio summary', function () {",
									"  pm.expect(responseBodyJson).to.have.property('portfolioSummary');",
									"  pm.expect(responseBodyJson.portfolioSummary).to.have.property('totalHoldings');",
									"  pm.expect(responseBodyJson.portfolioSummary).to.have.property('gainLossPercentage');",
									"});",
									"",
									"// Check holdings array exists",
									"pm.test('Response has holdings array', function () {",
									"  pm.expect(responseBodyJson).to.have.property('holdings');",
									"  pm.expect(responseBodyJson.holdings).to.be.an('array');",
									"});",
									"",
									"// Check upload history exists",
									"pm.test('Response has upload history', function () {",
									"  pm.expect(responseBodyJson).to.have.property('uploadHistory');",
									"  pm.expect(responseBodyJson.uploadHistory).to.be.an('array');",
									"});",
									"",
									"// Check AI insights exist",
									"pm.test('Response has AI insights', function () {",
									"  pm.expect(responseBodyJson).to.have.property('aiInsights');",
									"  pm.expect(responseBodyJson.aiInsights).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/dashboard",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"dashboard"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Dashboard (Security Context)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// @ts-check",
									"// Parse the response body as JSON",
									"const responseBodyJson = pm.response.json();",
									"",
									"// Check that the status code is 200",
									"pm.test('Status code is 200', function () {",
									"  pm.response.to.have.status(200);",
									"});",
									"",
									"// Check that response has required properties",
									"pm.test('Response has complete dashboard data', function () {",
									"  pm.expect(responseBodyJson).to.have.property('userProfile');",
									"  pm.expect(responseBodyJson).to.have.property('portfolioSummary');",
									"  pm.expect(responseBodyJson).to.have.property('holdings');",
									"  pm.expect(responseBodyJson).to.have.property('uploadHistory');",
									"  pm.expect(responseBodyJson).to.have.property('aiInsights');",
									"});",
									"",
									"// Validate user profile structure",
									"pm.test('User profile has correct structure', function () {",
									"  const profile = responseBodyJson.userProfile;",
									"  pm.expect(profile).to.have.property('userId');",
									"  pm.expect(profile).to.have.property('email');",
									"  pm.expect(profile).to.have.property('fullName');",
									"  pm.expect(profile).to.have.property('riskTolerance');",
									"});",
									"",
									"// Validate portfolio summary",
									"pm.test('Portfolio summary has correct structure', function () {",
									"  const summary = responseBodyJson.portfolioSummary;",
									"  pm.expect(summary).to.have.property('totalHoldings');",
									"  pm.expect(summary).to.have.property('totalInvestmentAmount');",
									"  pm.expect(summary).to.have.property('totalCurrentValue');",
									"  pm.expect(summary).to.have.property('gainLoss');",
									"  pm.expect(summary).to.have.property('gainLossPercentage');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/dashboard/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"dashboard",
								"me"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Register User",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// @ts-check",
							"// Types from @postman/test-script-types-plugin are available",
							"",
							"// Parse the response body as JSON",
							"const responseBodyJson = pm.response.json();",
							"",
							"// Check that the status code is 200",
							"pm.test('Status code is 200', function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"// Check that the response has required properties",
							"pm.test('Response has required properties', function () {",
							"  pm.expect(responseBodyJson).to.have.property('status');",
							"  pm.expect(responseBodyJson).to.have.property('accessToken');",
							"  pm.expect(responseBodyJson).to.have.property('userId');",
							"  pm.expect(responseBodyJson).to.have.property('email');",
							"  pm.expect(responseBodyJson).to.have.property('createdAt');",
							"});",
							"",
							"// Check that status is success",
							"pm.test('Status is success', function () {",
							"  pm.expect(responseBodyJson.status).to.equal('success');",
							"});",
							"",
							"// Save the access token to environment variable",
							"pm.test('Save access token', function () {",
							"  if (responseBodyJson.accessToken) {",
							"    pm.environment.set('access_token', responseBodyJson.accessToken);",
							"  }",
							"});",
							"",
							"// Save the userId to environment variable",
							"pm.test('Save userId', function () {",
							"  if (responseBodyJson.userId) {",
							"    pm.environment.set('user_id', responseBodyJson.userId);",
							"  }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\",\n  \"fullName\": \"Test User\",\n  \"phone\": \"+1234567890\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/v1/auth/register",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"auth",
						"register"
					]
				}
			},
			"response": []
		},
		{
			"name": "Login User",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// @ts-check",
							"// Types from @postman/test-script-types-plugin are available",
							"",
							"// Parse the response body as JSON",
							"const responseBodyJson = pm.response.json();",
							"",
							"// Check that the status code is 200",
							"pm.test('Status code is 200', function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"// Check that the response has required properties",
							"pm.test('Response has required properties', function () {",
							"  pm.expect(responseBodyJson).to.have.property('status');",
							"  pm.expect(responseBodyJson).to.have.property('accessToken');",
							"  pm.expect(responseBodyJson).to.have.property('userId');",
							"  pm.expect(responseBodyJson).to.have.property('email');",
							"  pm.expect(responseBodyJson).to.have.property('createdAt');",
							"});",
							"",
							"// Check that status is success",
							"pm.test('Status is success', function () {",
							"  pm.expect(responseBodyJson.status).to.equal('success');",
							"});",
							"",
							"// Save the access token to environment variable",
							"pm.test('Save access token', function () {",
							"  if (responseBodyJson.accessToken) {",
							"    pm.environment.set('access_token', responseBodyJson.accessToken);",
							"  }",
							"});",
							"",
							"// Save the userId to environment variable",
							"pm.test('Save userId', function () {",
							"  if (responseBodyJson.userId) {",
							"    pm.environment.set('user_id', responseBodyJson.userId);",
							"  }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/v1/auth/login",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"auth",
						"login"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test JWT Access",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// @ts-check",
							"",
							"// Check that the status code is 200",
							"pm.test('Status code is 200', function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"// Check that the response contains protected resource message",
							"pm.test('Response contains protected resource access', function () {",
							"  pm.expect(pm.response.text()).to.include('Protected resource accessed');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/v1/protected",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"protected"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Risk Profile & Get Recommendations",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// @ts-check",
							"// Types from @postman/test-script-types-plugin are available",
							"",
							"// Parse the response body as JSON",
							"const responseBodyJson = pm.response.json();",
							"",
							"// Check that the status code is 200",
							"pm.test('Status code is 200', function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"// Check that the response has required properties",
							"pm.test('Response has required properties', function () {",
							"  pm.expect(responseBodyJson).to.have.property('nextStep');",
							"  // starterPlan may or may not be present depending on user type",
							"});",
							"",
							"// Check that nextStep is valid",
							"pm.test('Next step is valid', function () {",
							"  const validNextSteps = ['portfolio_upload'];",
							"  pm.expect(validNextSteps).to.include(responseBodyJson.nextStep);",
							"});",
							"",
							"// Check starter plan if present",
							"if (responseBodyJson.starterPlan) {",
							"  pm.test('Starter plan has correct structure', function () {",
							"    const starterPlan = responseBodyJson.starterPlan;",
							"    pm.expect(starterPlan).to.have.property('equityAllocation');",
							"    pm.expect(starterPlan).to.have.property('debtAllocation');",
							"    pm.expect(starterPlan).to.have.property('recommendedFunds');",
							"    pm.expect(starterPlan).to.have.property('sipDistribution');",
							"  });",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"riskTolerance\": \"MODERATE\",\n  \"investmentHorizon\": 5,\n  \"primaryGoal\": \"RETIREMENT\",\n  \"monthlyInvestment\": 10000\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/onboarding/risk-profile",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"onboarding",
						"risk-profile"
					]
				}
			},
			"response": []
		},
		{
			"name": "Upload Portfolio (Conservative)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// @ts-check",
							"",
							"// Check that the status code is 200 (OK)",
							"pm.test('Status code is 200', function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"// Parse the response body as JSON",
							"const responseBodyJson = pm.response.json();",
							"",
							"// Check that the response has required properties",
							"pm.test('Response has required properties', function () {",
							"  pm.expect(responseBodyJson).to.have.property('uploadId');",
							"  pm.expect(responseBodyJson).to.have.property('status');",
							"});",
							"",
							"// Check that uploadId is a valid UUID",
							"pm.test('UploadId is valid UUID', function () {",
							"  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;",
							"  pm.expect(responseBodyJson.uploadId).to.match(uuidRegex);",
							"});",
							"",
							"// Check that status is valid (parsing, enriching, completed, or failed)",
							"pm.test('Status is valid', function () {",
							"  const validStatuses = ['parsing', 'enriching', 'completed', 'failed'];",
							"  pm.expect(validStatuses).to.include(responseBodyJson.status.toLowerCase());",
							"});",
							"",
							"// Save uploadId for status checking",
							"pm.test('Save uploadId', function () {",
							"  if (responseBodyJson.uploadId) {",
							"    pm.environment.set('upload_id', responseBodyJson.uploadId);",
							"  }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"userId\": \"{{user_id}}\",\n  \"fileName\": \"conservative_portfolio.xlsx\",\n  \"fileContent\": \"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\",\n  \"fileType\": \"xlsx\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/onboarding/uploads",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"onboarding",
						"uploads"
					]
				}
			},
			"response": []
		},
		{
			"name": "Upload Portfolio (Aggressive)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// @ts-check",
							"",
							"// Check that the status code is 200 (OK)",
							"pm.test('Status code is 200', function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"// Parse the response body as JSON",
							"const responseBodyJson = pm.response.json();",
							"",
							"// Check that the response has required properties",
							"pm.test('Response has required properties', function () {",
							"  pm.expect(responseBodyJson).to.have.property('uploadId');",
							"  pm.expect(responseBodyJson).to.have.property('status');",
							"});",
							"",
							"// Check that uploadId is a valid UUID",
							"pm.test('UploadId is valid UUID', function () {",
							"  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;",
							"  pm.expect(responseBodyJson.uploadId).to.match(uuidRegex);",
							"});",
							"",
							"// Check that status is valid (parsing, enriching, completed, or failed)",
							"pm.test('Status is valid', function () {",
							"  const validStatuses = ['parsing', 'enriching', 'completed', 'failed'];",
							"  pm.expect(validStatuses).to.include(responseBodyJson.status.toLowerCase());",
							"});",
							"",
							"// Save uploadId for status checking",
							"pm.test('Save uploadId', function () {",
							"  if (responseBodyJson.uploadId) {",
							"    pm.environment.set('upload_id', responseBodyJson.uploadId);",
							"  }",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"userId\": \"{{user_id}}\",\n  \"fileName\": \"aggressive_portfolio.pdf\",\n  \"fileContent\": \"JVBERi0xLjQKMSAwIG9iago8PCAvVHlwZSAvQ2F0YWxvZyAvUGFnZXMgMiAwIFIgPj4KZW5kb2JqCjIgMCBvYmoKPDwgL1R5cGUgL1BhZ2VzIC9LaWRzIFszIDAgUl0gL0NvdW50IDEgPj4KZW5kb2JqCjMgMCBvYmoKPDwgL1R5cGUgL1BhZ2UgL1BhcmVudCAyIDAgUiAvTWVkaWFCb3ggWzAgMCA2MTIgNzkyXSAvQ29udGVudHMgNCAwIFIgL1Jlc291cmNlcyA8PCAvRm9udCA8PCAvRjEgNSAwIFIgPj4gPj4gPj4KZW5kb2JqCjQgMCBvYmoKPDwgL0xlbmd0aCAzMDAgPj4Kc3RyZWFtCkJUCi9GMSAxNCBUZgo1MCA3NTAgVGQKKEFnZ3Jlc3NpdmUgUG9ydGZvbGlvIEhvbGRpbmdzKSBUagowIC0zMCBUZAovRjEgMTAgVGYKKFNjaGVtZSBGdW5kIE5hbWUgVW5pdHMgTkFWIERhdGUpIFRqCjAgLTIwIFRkCihFU1NJT1UgSERGQyBUb3AgMTAwIEZ1bmQgNTAwLjAgMTUwLjAgMjAyMy0xMC0xMCkgVGoKMCAtMjAgVGQKKEVTU0lPVSBJQ0lDSSBQcnVkZW50aWFsIEJsdWVjaGlwIEZ1bmQgMzAwLjAgMTUwLjAgMjAyMy0xMC0xMCkgVGoKRVQKZW5kc3RyZWFtCmVuZG9iago1IDAgb2JqCjw8IC9UeXBlIC9Gb250IC9TdWJ0eXBlIC9UeXBlMSAvQmFzZUZvbnQgL0hlbHZldGljYSA+PgplbmRvYmoKeHJlZgowIDYKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDA5IDAwMDAwIG4gCjAwMDAwMDAwNTggMDAwMDAgbiAKMDAwMDAwMDExNSAwMDAwMCBuIAowMDAwMDAwMjQ0IDAwMDAwIG4gCjAwMDAwMDA1OTQgMDAwMDAgbiAKdHJhaWxlcgo8PCAvU2l6ZSA2IC9Sb290IDEgMCBSID4+CnN0YXJ0eHJlZgo2ODAKJSVFT0Y=\",\n  \"fileType\": \"pdf\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/onboarding/uploads",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"onboarding",
						"uploads"
					]
				}
			},
			"response": []
		},
		{
			"name": "Check Upload Status",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// @ts-check",
							"",
							"// Check that the status code is 200",
							"pm.test('Status code is 200', function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"// Parse the response body as JSON",
							"const responseBodyJson = pm.response.json();",
							"",
							"// Check that the response has required properties",
							"pm.test('Response has required properties', function () {",
							"  pm.expect(responseBodyJson).to.have.property('uploadId');",
							"  pm.expect(responseBodyJson).to.have.property('status');",
							"});",
							"",
							"// Check that uploadId matches the requested one",
							"pm.test('UploadId matches requested', function () {",
							"  pm.expect(responseBodyJson.uploadId).to.equal(pm.environment.get('upload_id'));",
							"});",
							"",
							"// Check that status is valid (parsing, enriching, completed, or failed)",
							"pm.test('Status is valid', function () {",
							"  const validStatuses = ['parsing', 'enriching', 'completed', 'failed'];",
							"  pm.expect(validStatuses).to.include(responseBodyJson.status.toLowerCase());",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/onboarding/uploads/{{upload_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"onboarding",
						"uploads",
						"{{upload_id}}"
					]
				}
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		}
	]
}